<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSc ITET ETH – Abstraktionslevel</title>
    <style>
        :root {
            --bg: #0f1117;
            --surface: #1a1d27;
            --surface2: #232733;
            --border: #2e3345;
            --text: #e2e4ed;
            --text-dim: #8b8fa7;
            --accent: #6c8aff;
            --accent-glow: rgba(108, 138, 255, .18);
            --sem1: #5b9aff;
            --sem2: #45d4a8;
            --sem3: #f0a050;
            --sem4: #e06088;
            --vw-math: #a78bfa;
            --vw-phys: #22d3ee;
            --vor-gymi: #f9a8d4;
            --gymi: #86efac;
            --radius: 12px;
            --transition: .3s cubic-bezier(.4, 0, .2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ── NAV BAR ── */
        .navbar {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 17, 23, .92);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid var(--border);
            padding: 12px 24px;
            display: flex;
            align-items: center;
            gap: 24px;
            flex-wrap: wrap;
        }

        .navbar h1 {
            font-size: 1.15rem;
            font-weight: 700;
            white-space: nowrap;
            background: linear-gradient(135deg, var(--sem1), var(--sem3));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-label {
            font-size: .78rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: .08em;
        }

        /* Semester Tabs */
        .sem-tabs {
            display: flex;
            gap: 4px;
        }

        .sem-tab {
            padding: 6px 16px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-dim);
            cursor: pointer;
            font-size: .82rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .sem-tab:hover {
            background: var(--surface2);
            color: var(--text);
        }

        .sem-tab.active {
            border-color: var(--accent);
            color: var(--accent);
            background: var(--accent-glow);
        }

        .sem-tab[data-sem="all"].active {
            border-color: var(--accent);
        }

        .sem-tab[data-sem="1"].active {
            border-color: var(--sem1);
            color: var(--sem1);
            background: rgba(91, 154, 255, .12);
        }

        .sem-tab[data-sem="2"].active {
            border-color: var(--sem2);
            color: var(--sem2);
            background: rgba(69, 212, 168, .12);
        }

        .sem-tab[data-sem="3"].active {
            border-color: var(--sem3);
            color: var(--sem3);
            background: rgba(240, 160, 80, .12);
        }

        .sem-tab[data-sem="4"].active {
            border-color: var(--sem4);
            color: var(--sem4);
            background: rgba(224, 96, 136, .12);
        }

        .sem-tab[data-sem="vor-gymi"].active {
            border-color: var(--vor-gymi);
            color: var(--vor-gymi);
            background: rgba(249, 168, 212, .12);
        }

        .sem-tab[data-sem="gymi"].active {
            border-color: var(--gymi);
            color: var(--gymi);
            background: rgba(134, 239, 172, .12);
        }

        /* Abstraction Level Buttons */
        .level-btns {
            display: flex;
            gap: 4px;
        }

        .level-btn {
            padding: 6px 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-dim);
            cursor: pointer;
            font-size: .82rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .level-btn:hover {
            background: var(--surface2);
            color: var(--text);
        }

        .level-btn.active {
            border-color: var(--accent);
            color: var(--accent);
            background: var(--accent-glow);
        }

        /* ── MAIN CONTENT ── */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 28px 24px 60px;
            position: relative;
        }

        /* Semester Section */
        .semester-section {
            margin-bottom: 36px;
        }

        .semester-section.hidden {
            display: none;
        }

        .semester-header {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 16px;
            padding-left: 14px;
            border-left: 4px solid var(--sem1);
        }

        .semester-section[data-sem="2"] .semester-header {
            border-color: var(--sem2);
        }

        .semester-section[data-sem="3"] .semester-header {
            border-color: var(--sem3);
        }

        .semester-section[data-sem="4"] .semester-header {
            border-color: var(--sem4);
        }

        .semester-section[data-sem="vg-math"] .semester-header {
            border-color: var(--vor-gymi);
        }

        .semester-section[data-sem="gy-math"] .semester-header {
            border-color: var(--vw-math);
        }

        .semester-section[data-sem="gy-phys"] .semester-header {
            border-color: var(--vw-phys);
        }

        /* Section Divider */
        .section-divider {
            text-align: center;
            margin: 48px 0 32px;
            position: relative;
        }

        .section-divider::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            height: 1px;
            background: var(--border);
        }

        .section-divider span {
            position: relative;
            background: var(--bg);
            padding: 0 20px;
            font-size: .85rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: .1em;
            font-weight: 700;
        }

        .section-divider.hidden {
            display: none;
        }

        /* Module Grid */
        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }

        /* Module Card */
        .module-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .module-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--sem1);
            transition: var(--transition);
        }

        .semester-section[data-sem="2"] .module-card::before {
            background: var(--sem2);
        }

        .semester-section[data-sem="3"] .module-card::before {
            background: var(--sem3);
        }

        .semester-section[data-sem="4"] .module-card::before {
            background: var(--sem4);
        }

        .semester-section[data-sem="vg-math"] .module-card::before {
            background: var(--vor-gymi);
        }

        .semester-section[data-sem="gy-math"] .module-card::before {
            background: var(--vw-math);
        }

        .semester-section[data-sem="gy-phys"] .module-card::before {
            background: var(--vw-phys);
        }

        .module-card:hover {
            border-color: #444;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, .3);
        }

        .module-card.expanded {
            grid-column: 1 / -1;
            max-width: 900px;
        }

        .module-header {
            padding: 16px 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .module-name {
            font-size: 1.05rem;
            font-weight: 700;
        }

        .module-toggle {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--surface2);
            border: 1px solid var(--border);
            color: var(--text-dim);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: .8rem;
            transition: var(--transition);
        }

        .module-card.expanded .module-toggle,
        .module-card.level-open .module-toggle {
            transform: rotate(180deg);
            color: var(--accent);
        }

        /* Level 2 */
        .level2-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height .4s cubic-bezier(.4, 0, .2, 1), padding .3s;
            padding: 0 18px;
        }

        .module-card.expanded .level2-container,
        .module-card.level-open .level2-container {
            max-height: 2000px;
            padding: 0 18px 16px;
        }

        .level2-item {
            margin-bottom: 10px;
            background: var(--surface2);
            border-radius: 8px;
            border: 1px solid transparent;
            transition: var(--transition);
            overflow: hidden;
        }

        .level2-item:hover {
            border-color: var(--border);
        }

        .level2-header {
            padding: 10px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            font-weight: 600;
            font-size: .92rem;
        }

        .level2-toggle {
            font-size: .7rem;
            color: var(--text-dim);
            transition: var(--transition);
        }

        .level2-item.open .level2-toggle {
            transform: rotate(180deg);
            color: var(--accent);
        }

        /* Level 3 */
        .level3-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height .35s cubic-bezier(.4, 0, .2, 1);
        }

        .level2-item.open .level3-container,
        .level2-item.level-open .level3-container {
            max-height: 1000px;
        }

        .level3-list {
            padding: 0 14px 10px 28px;
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .level3-tag {
            padding: 4px 10px;
            background: rgba(108, 138, 255, .08);
            border: 1px solid rgba(108, 138, 255, .15);
            border-radius: 6px;
            font-size: .8rem;
            color: var(--text-dim);
            transition: var(--transition);
        }

        .level3-tag:hover {
            background: rgba(108, 138, 255, .15);
            color: var(--text);
        }

        /* Level 4 (sub-sub items) */
        .level4-group {
            margin-top: 6px;
            padding-left: 8px;
        }

        .level4-label {
            font-size: .78rem;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .level4-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .level4-tag {
            padding: 3px 8px;
            background: rgba(108, 138, 255, .05);
            border: 1px solid rgba(108, 138, 255, .1);
            border-radius: 5px;
            font-size: .75rem;
            color: var(--text-dim);
        }

        /* Breadcrumb / Zoom indicator */
        .zoom-indicator {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 8px 20px;
            font-size: .82rem;
            color: var(--text-dim);
            display: none;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, .4);
            z-index: 50;
        }

        .zoom-indicator.visible {
            display: flex;
        }

        .zoom-indicator button {
            background: var(--accent);
            color: #fff;
            border: none;
            padding: 4px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: .8rem;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                padding: 10px 12px;
                gap: 12px;
            }

            .container {
                padding: 16px 12px 40px;
            }

            .module-grid {
                grid-template-columns: 1fr;
            }

            .module-card.expanded {
                grid-column: 1;
            }
        }

        /* ── ARROW OVERLAY ── */
        #arrow-svg {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 10;
            overflow: visible;
        }

        .arrow-toggle {
            padding: 6px 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-dim);
            cursor: pointer;
            font-size: .82rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .arrow-toggle:hover {
            background: var(--surface2);
            color: var(--text);
        }

        .arrow-toggle.active {
            border-color: var(--accent);
            color: var(--accent);
            background: var(--accent-glow);
        }
    </style>
</head>

<body>

    <nav class="navbar">
        <h1>BSc ITET ETH</h1>

        <div class="nav-group">
            <span class="nav-label">Semester</span>
            <div class="sem-tabs">
                <button class="sem-tab active" data-sem="all">Alle</button>
                <button class="sem-tab" data-sem="vor-gymi">Vor-Gymi</button>
                <button class="sem-tab" data-sem="gymi">Gymi</button>
                <button class="sem-tab" data-sem="1">1</button>
                <button class="sem-tab" data-sem="2">2</button>
                <button class="sem-tab" data-sem="3">3</button>
                <button class="sem-tab" data-sem="4">4</button>
            </div>
        </div>

        <div class="nav-group">
            <span class="nav-label">Abstraktion</span>
            <div class="level-btns">
                <button class="level-btn active" data-level="1" title="Nur Module">L1 – Module</button>
                <button class="level-btn" data-level="2" title="Module + Themenblöcke">L2 – Themen</button>
                <button class="level-btn" data-level="3" title="Alles aufgeklappt">L3 – Details</button>
            </div>
        </div>

        <div class="nav-group">
            <button class="arrow-toggle active" id="arrowToggle" title="Abhängigkeitspfeile anzeigen/verbergen">⤷
                Roadmap</button>
        </div>
    </nav>

    <div class="container" id="content"></div>

    <div class="zoom-indicator" id="zoomIndicator">
        <span id="zoomPath"></span>
        <button onclick="zoomOut()">← Zurück</button>
    </div>

    <script>
        // ═══════════════════════════════════════════════════════════
        // DATA – 1:1 from BSc ITET ETH.md (Semester 1-4)
        // ═══════════════════════════════════════════════════════════
        const data = [
            {
                semester: 1,
                label: "1. Semester",
                modules: [
                    {
                        name: "Technische Mechanik",
                        topics: [
                            { name: "Kinematik", items: ["Kraft", "Moment", "Geschwindigkeit/Bewegung"] },
                            { name: "Statik", items: ["Gleichgewicht", "Äquivalenz und Reduktion von Kräftegruppen", "Reibung"] },
                            { name: "Dynamik", items: ["Newtonsches Bewegungsgesetz (2. Newton)", "Impulssatz", "Drallsatz"] }
                        ]
                    },
                    {
                        name: "Netzwerk und Schaltungen I",
                        topics: [
                            { name: "Physikalische Grundlagen", items: ["Stromursprung", "Spannungsursprung", "Elektrostatisches Feld", "Leitungsmechanismen"] },
                            { name: "Bauelemente & Analyse", items: ["Grundbauelemente", "Mathematische Modelle", "Schaltungsentwurf", "Netzwerk-Analyse"] },
                            { name: "Gleichstromnetzwerke", items: ["Stromverteilung", "Spannungsverteilung", "Stationäres Strömungsfeld", "Berechnungsmethoden"] },
                            { name: "Elektromagnetische Felder", items: ["Induktion", "Zeitvariante Felder", "Technische Anwendungen"] }
                        ]
                    },
                    {
                        name: "Digitaltechnik",
                        topics: [
                            { name: "Grundlagen & Bausteine", items: ["Analog vs. Digital", "CMOS-Technik", "Zahlensysteme", "Speicherbausteine"] },
                            { name: "Schaltungsdesign", items: ["Logikgatter", "Boolesche Algebra", "Kombinatorik", "Sequenzielle Logik"] },
                            { name: "Systementwurf", items: ["Endliche Automaten (FSM)", "Zustandsspeicher", "Mikroprozessor-Basics", "Synthese-Methoden"] }
                        ]
                    },
                    {
                        name: "Analysis I",
                        topics: [
                            { name: "Zahlenbereiche", items: ["Reelle Zahlen", "Komplexe Zahlen"] },
                            { name: "Analysis-Grundlagen", items: ["Folgen & Grenzwerte", "Reihen & Potenzreihen", "Stetige Abbildungen"] },
                            { name: "Differential- & Integralrechnung", items: ["Variable Funktionen", "Ableitungsregeln", "Integrationsmethoden"] },
                            { name: "Differentialgleichungen", items: ["Einführung", "Gewöhnliche DGLs"] }
                        ]
                    },
                    {
                        name: "Lineare Algebra",
                        topics: [
                            { name: "Lineare Gleichungssysteme", items: ["Gauss-Algorithmus", "Matrizen-Operationen"] },
                            { name: "Matrizenzerlegungen", items: ["LU-Zerlegung", "QR-Zerlegung", "Singulärwertzerlegung (SVD)"] },
                            { name: "Vektorräume", items: ["Basiswahl & -wechsel", "Lineare Abbildungen", "Koordinatentransformation"] },
                            { name: "Norm & Skalarprodukt", items: ["Gram-Schmidt-Verfahren", "Projektoren"] },
                            { name: "Eigenwertprobleme", items: ["Eigenwerte & Eigenvektoren", "Determinanten", "Symmetrische Matrizen"] },
                            { name: "Anwendungen", items: ["Ausgleichsrechnung", "Numerische Aspekte", "Python (NumPy/SciPy)"] }
                        ]
                    }
                ]
            },
            {
                semester: 2,
                label: "2. Semester",
                modules: [
                    {
                        name: "Physik I",
                        topics: [
                            {
                                name: "Schwingungen & Wellen",
                                items: [],
                                subtopics: [
                                    { name: "Schwingungstypen", items: ["Harmonisch", "Gedämpft", "Erzwungen"] },
                                    { name: "Wellenpropagation", items: ["Energie & Intensität", "Beugung & Reflektion"] },
                                    { name: "Welleneffekte", items: ["Dopplereffekt", "Interferenz & Überlagerung", "Resonanz", "Stehende Wellen"] }
                                ]
                            },
                            {
                                name: "Thermodynamik",
                                items: [],
                                subtopics: [
                                    { name: "Gaseigenschaften", items: ["Kinetische Gastheorie", "Ideales Gas"] },
                                    { name: "Hauptsätze", items: ["Energieerhaltung", "Kreisprozesse", "Entropie"] },
                                    { name: "Wärmetransport", items: ["Übertragung", "Strahlung"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Analysis II",
                        topics: [
                            { name: "Mehrdimensionale Differentialrechnung", items: ["Partielle Ableitungen", "Ableitungsregeln", "Implizite Funktionen", "Extremwertaufgaben"] },
                            { name: "Mehrdimensionale Integralrechnung", items: ["Mehrfachintegrale", "Integrationsmethoden", "Integration über Untermannigfaltigkeiten"] },
                            { name: "Vektoranalysis", items: ["Vektorfelder", "Satz von Gauss", "Satz von Stokes"] }
                        ]
                    },
                    {
                        name: "Mathematische Methoden",
                        topics: [
                            { name: "Komplexe Analysis", items: ["Komplexe Funktionen", "Ableitungsregeln", "Cauchy-Riemann-Gleichungen"] },
                            { name: "Integration", items: ["Komplexes Integral", "Residuensatz", "Anwendungen"] },
                            { name: "Reihenentwicklungen", items: ["Taylor-Reihen", "Laurent-Reihen"] },
                            { name: "Transformationen", items: ["Fourier-Reihen", "Fourier-Transformation", "Laplace-Transformation"] }
                        ]
                    },
                    {
                        name: "Netzwerk und Schaltungen II",
                        topics: [
                            { name: "Wechselstromrechnung", items: ["Komplexe Methoden", "Maschenstromverfahren", "Knotenpotentialverfahren", "Netzwerksätze"] },
                            { name: "Systemverhalten", items: ["Zeitbereich", "Frequenzbereich", "Übergangsverhalten", "Übertragungsfunktion", "Zweitore"] },
                            { name: "Signalanalyse", items: ["Nicht-sinusförmige Signale", "Fourierzerlegung", "Fouriertransformation", "Laplacetransformation"] },
                            { name: "Operationsverstärker", items: ["Grundschaltungen", "Gegentaktverstärker", "Differenzverstärker", "Dimensionierung"] }
                        ]
                    },
                    {
                        name: "Informatik I",
                        topics: [
                            { name: "Grundlagen", items: ["Fundamentale Datentypen", "Ausdrücke & Anweisungen", "Computerarithmetik"] },
                            { name: "Programmierkonzepte", items: ["Kontrollstrukturen", "Funktionen", "Klassen (OOP)", "Referenzen & Zeiger"] },
                            { name: "Datenstrukturen", items: ["Containertypen", "Dynamische Datentypen", "Speichermanagement"] }
                        ]
                    }
                ]
            },
            {
                semester: 3,
                label: "3. Semester",
                modules: [
                    {
                        name: "Signal- und Systemtheorie I",
                        topics: [
                            { name: "Grundlagen", items: ["Signalklassifikation", "Systemklassifikation", "Zeit- & Frequenzbereich", "Signal- & Hilberträume"] },
                            { name: "Systemtheorie", items: ["Lineare zeitinvariante Systeme (LTI)", "Verallgemeinerte Funktionen"] },
                            { name: "Abtastung", items: ["Zeitkontinuierliche Signale", "Abtasttheorem"] },
                            { name: "Zeitdiskrete Systeme", items: ["Systemverhalten", "z-Transformation"] },
                            { name: "Fouriertransformation", items: ["Diskrete Fourier-Transformation (DFT)", "Schnelle Fourier-Transformation (FFT)"] }
                        ]
                    },
                    {
                        name: "Informatik II",
                        topics: [
                            {
                                name: "Algorithmen & Komplexität",
                                items: ["Asymptotische Laufzeit (O-Notation)"],
                                subtopics: [
                                    { name: "Basis-Algorithmen", items: ["Suchen", "Sortieren"] },
                                    { name: "Graphenalgorithmen", items: ["Kürzeste Wege", "Spannbäume"] }
                                ]
                            },
                            {
                                name: "Datenstrukturen",
                                items: ["Hashtabellen"],
                                subtopics: [
                                    { name: "Baumstrukturen", items: ["Suchbäume", "Balancierte Bäume", "Heaps"] }
                                ]
                            },
                            { name: "Entwurfsstrategien", items: ["Induktion", "Divide & Conquer", "Backtracking", "Dynamische Programmierung"] },
                            {
                                name: "Generische Programmierung",
                                items: ["C++ Templates"],
                                subtopics: [
                                    { name: "Funktionale Konzepte", items: ["Funktionen höherer Ordnung", "Lambdas", "Closures"] }
                                ]
                            },
                            {
                                name: "Parallelisierung",
                                items: [],
                                subtopics: [
                                    { name: "Grundlagen", items: ["Nebenläufigkeit", "Abhängigkeiten"] },
                                    { name: "Speichermodelle", items: ["Geteilter Speicher"] },
                                    { name: "Synchronisation", items: ["Race Conditions", "Mutex", "Kommunikation"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Halbleiterschaltungstechnik",
                        topics: [
                            { name: "Transistor-Grundlagen", items: ["Bauteile (Bipolar/MOSFET)", "Signalverhalten", "Arbeitspunkt", "Eintransistorverstärker"] },
                            { name: "Frequenzanalyse", items: ["Verstärker-Frequenzgang", "Bandbreitenerweiterung"] },
                            {
                                name: "Spezielle Verstärker",
                                items: ["Differenzverstärker", "Transimpedanzverstärker"],
                                subtopics: [
                                    { name: "Instrumentierungsverstärker", items: ["Störunterdrückung", "Chopper-Technik"] }
                                ]
                            },
                            { name: "Aktive Filter", items: ["Grundstrukturen", "Biquadratische Stufen", "Höhere Ordnung", "Switched-Cap-Filter"] }
                        ]
                    },
                    {
                        name: "Physik II",
                        topics: [
                            { name: "Quantenmechanik Grundlagen", items: ["Wellenmechanik", "Postulate & Formalismus"] },
                            { name: "Modellsysteme", items: ["Potentialtopf", "Harmonischer Oszillator", "Wasserstoffatom"] },
                            { name: "Mehrteilchensysteme", items: ["Identische Teilchen", "Pauli-Prinzip", "Quantenstatistik"] },
                            { name: "Festkörperphysik", items: ["Kristallsysteme", "Bandstrukturen"] },
                            { name: "Konzepte & Anwendungen", items: ["Näherungsmethoden", "Verschränkung & Superposition", "Engineering-Anwendungen"] }
                        ]
                    },
                    {
                        name: "Diskrete Mathematik",
                        topics: [
                            { name: "Mengenlehre", items: ["Grundlagen", "Axiome"] },
                            { name: "Kombinatorik", items: ["Zählformen", "Zählprinzipien", "Spezielle Zählprobleme"] },
                            {
                                name: "Graphentheorie",
                                items: [],
                                subtopics: [
                                    { name: "Graphenarten", items: ["Netzwerke", "Bäume"] },
                                    { name: "Graphenprobleme", items: ["Einfärbung", "Flüsse & Schnitte", "Matchings"] }
                                ]
                            },
                            {
                                name: "Algebra",
                                items: [],
                                subtopics: [
                                    { name: "Zahlentheorie", items: ["Teilbarkeit", "Kongruenz"] },
                                    { name: "Strukturen", items: ["Gruppen", "Körper & Ringe"] },
                                    { name: "Anwendungen", items: ["Kryptographie", "Fehlerkorrektur"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Analysis III",
                        topics: [
                            { name: "PDE Einführung", items: ["Klassifikation", "Typen"] },
                            { name: "Quasilineare DGLs", items: ["Charakteristikenmethode", "Erhaltungssätze"] },
                            { name: "Hyperbolische DGLs", items: ["Wellengleichung", "d'Alembert-Formel", "Separationsansatz"] },
                            { name: "Parabolische DGLs", items: ["Wärmeleitungsgleichung", "Maximumsprinzip", "Separationsansatz"] },
                            { name: "Elliptische DGLs", items: ["Laplace-Gleichung", "Maximumsprinzip", "Variationsmethoden"] }
                        ]
                    }
                ]
            },
            {
                semester: 4,
                label: "4. Semester",
                modules: [
                    {
                        name: "Signal- und Systemtheorie II",
                        topics: [
                            { name: "Systemmodellierung", items: ["Dynamische Systeme", "LTI-Systeme", "Zustandsgleichungen"] },
                            { name: "Zustandsraumanalyse", items: ["Lösungsmethoden", "Stabilität", "Steuerbarkeit", "Beobachtbarkeit"] },
                            { name: "Frequenzbereichsanalyse", items: ["Frequenzgang", "Bode-Diagramm", "Nyquist-Diagramm"] },
                            { name: "Zeitdiskrete Systeme", items: ["Abtastung", "Systemmodelle"] },
                            { name: "Erweiterte Themen", items: ["Nichtlineare Systeme", "Chaos", "Diskrete Ereignisse", "Hybride Systeme"] }
                        ]
                    },
                    {
                        name: "Technische Informatik",
                        topics: [
                            {
                                name: "Hardware-Architektur",
                                items: [],
                                subtopics: [
                                    { name: "Mikroprozessoren", items: ["Control Paths", "Data Paths"] },
                                    { name: "Optimierungen", items: ["Pipelining", "Speculation", "Caching"] }
                                ]
                            },
                            {
                                name: "Software-Systeme",
                                items: ["Low-Level Programmierung"],
                                subtopics: [
                                    {
                                        name: "Betriebssystem-Konzepte",
                                        items: ["Prozess-Management", "Scheduling"],
                                        subtopics: [
                                            { name: "Speicherverwaltung", items: ["Physisch", "Virtuell"] }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Halbleiterelemente",
                        topics: [
                            { name: "Einführung", items: ["Historie der Mikroelektronik"] },
                            {
                                name: "Halbleiterphysik",
                                items: ["Festkörper-Kristallstruktur", "Halbleitereigenschaften (Si)", "Quantenmechanik & Bändermodell", "Leitfähigkeit & Dispersion", "Gleichgewichtsstatistik", "Transportgleichungen", "Generation & Rekombination"]
                            },
                            {
                                name: "Bauelemente",
                                items: [],
                                subtopics: [
                                    { name: "pn-Übergang", items: ["Physik & Elektrik"] },
                                    { name: "pn-Diode", items: ["Kennlinien", "Kleinsignalverhalten", "Durchbruchmechanismen"] },
                                    { name: "MOS-Bauelemente", items: ["Bänderdiagramm", "MOSFET-Betrieb", "CV- & IV-Charakteristiken", "Frequenzverhalten"] },
                                    { name: "Bipolartransistoren", items: ["Funktionsprinzip", "Betriebsmodi", "Modellierung & Simulation"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Elektromagnetische Wellen und Felder",
                        topics: [
                            { name: "Grundlagen", items: ["Maxwell'sche Gleichungen", "Wellengleichung"] },
                            { name: "Wellenausbreitung", items: ["Felder im freien Raum", "Brechung & Reflexion"] },
                            { name: "Strahlung", items: ["Dipolstrahlung", "Feldwinkelspektrum"] }
                        ]
                    },
                    {
                        name: "Numerik",
                        topics: [
                            { name: "Grundlagen", items: ["Scientific Python", "Fehleranalyse"] },
                            { name: "Analysis-Methoden", items: ["Nullstellensuche", "Newton-Verfahren", "Quadratur"] },
                            { name: "Differentialgleichungen", items: ["Anfangswertaufgaben", "Einschrittverfahren", "Schrittweitensteuerung", "Stabilitätsanalyse"] }
                        ]
                    },
                    {
                        name: "Wahrscheinlichkeitstheorie und Statistik",
                        topics: [
                            { name: "Wahrscheinlichkeitsräume", items: ["Kolmogorov-Axiome", "Diskrete Modelle", "Verteilungsfunktionen"] },
                            { name: "Bedingte Wahrscheinlichkeiten", items: ["Bayes'sche Regel", "Nachrichtenquellen", "Bedingte Verteilungen"] },
                            { name: "Zufallsvariablen", items: ["Erwartungswert & Varianz", "Gesetz der grossen Zahlen", "Zentraler Grenzwertsatz"] },
                            { name: "Statistik", items: ["Parameterschätzung", "Hypothesentests"] }
                        ]
                    }
                ]
            }
        ];

        // ═══════════════════════════════════════════════════════════
        // VORWISSEN DATA – from Vorwissen-Mathematik.md & Vorwissen-Physik.md
        // ═══════════════════════════════════════════════════════════
        // ═══════════════════════════════════════════════════════════
        // VOR-GYMI DATA
        // ═══════════════════════════════════════════════════════════
        const vorGymiData = [
            {
                subject: "vg-math",
                label: "Vor-Gymi – Mathematik",
                modules: [
                    {
                        name: "Zahlenbereiche & Arithmetik",
                        topics: [
                            {
                                name: "Natürliche Zahlen ℕ", items: [], subtopics: [
                                    { name: "Stellenwertsystem", items: ["Tausender", "Hunderter", "Zehner", "Einer"] },
                                    { name: "Operationen", items: ["Addition", "Subtraktion", "Multiplikation", "Division"] }
                                ]
                            },
                            {
                                name: "Ganze Zahlen ℤ", items: [], subtopics: [
                                    { name: "Zahlenstrahl", items: ["Positive Zahlen", "Negative Zahlen"] },
                                    { name: "Rechenregeln", items: ["Vorzeichenregeln", "Betrag"] }
                                ]
                            },
                            {
                                name: "Rationale Zahlen ℚ", items: [], subtopics: [
                                    { name: "Bruchrechnung", items: ["Erweitern & Kürzen", "Hauptnenner", "Kehrwert", "ggT & kgV", "Addition & Subtraktion", "Multiplikation & Division"] },
                                    { name: "Dezimalzahlen", items: ["Periodische Zahlen", "Umwandlung Bruch ↔ Dezimal", "Stellenwerte (Zehntel, Hundertstel)"] }
                                ]
                            },
                            {
                                name: "Reelle Zahlen ℝ", items: [], subtopics: [
                                    { name: "Irrationale Zahlen", items: ["√2", "Kreiszahl π"] },
                                    { name: "Wurzeln", items: ["Quadratwurzel", "Wurzelgesetze", "Rationalmachen des Nenners"] }
                                ]
                            },
                            {
                                name: "Prozentrechnung", items: [], subtopics: [
                                    { name: "Grundaufgaben", items: ["Prozentwert", "Prozentsatz", "Grundwert"] },
                                    { name: "Veränderung", items: ["Prozentuale Erhöhung", "Prozentuale Reduktion", "Zinsrechnung"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Terme, Potenzen & Algebra",
                        topics: [
                            {
                                name: "Terme & Umformungen", items: [], subtopics: [
                                    { name: "Grundoperationen", items: ["Zusammenfassen", "Ausmultiplizieren (Distributivgesetz)", "Ausklammern"] },
                                    { name: "Binomische Formeln", items: ["(a+b)² = a²+2ab+b²", "(a−b)² = a²−2ab+b²", "(a+b)(a−b) = a²−b²", "Rückwärts erkennen"] }
                                ]
                            },
                            {
                                name: "Potenzen & Wurzeln", items: [], subtopics: [
                                    { name: "Potenzgesetze", items: ["aⁿ·aᵐ = aⁿ⁺ᵐ", "aⁿ÷aᵐ = aⁿ⁻ᵐ", "(aⁿ)ᵐ = aⁿᵐ", "(a·b)ⁿ = aⁿ·bⁿ"] },
                                    { name: "Besondere Exponenten", items: ["a⁰ = 1", "a⁻ⁿ = 1/aⁿ", "a^(1/n) = ⁿ√a", "a^(m/n) = ⁿ√(aᵐ)"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Gleichungen & Proportionalität",
                        topics: [
                            { name: "Lineare Gleichungen", items: ["Äquivalenzumformungen", "Gleichungen mit Klammern", "Gleichungen mit Brüchen"] },
                            {
                                name: "Lineare Gleichungssysteme", items: [], subtopics: [
                                    { name: "Lösungsverfahren", items: ["Einsetzungsverfahren", "Gleichsetzungsverfahren", "Additionsverfahren"] }
                                ]
                            },
                            {
                                name: "Quadratische Gleichungen", items: [], subtopics: [
                                    { name: "Lösungsmethoden", items: ["Reinquadratisch (x²=a)", "Ausklammern", "Faktorisieren", "abc-/pq-Formel (Einführung)"] }
                                ]
                            },
                            {
                                name: "Proportionalität & Dreisatz", items: [], subtopics: [
                                    { name: "Typen", items: ["Direkte Proportionalität (y=kx)", "Indirekte Proportionalität (y=k/x)"] },
                                    { name: "Dreisatz", items: ["Direkter Dreisatz", "Indirekter Dreisatz"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Funktionen & Koordinatensystem",
                        topics: [
                            { name: "Koordinatensystem", items: ["x-/y-Achse", "Quadranten", "Punkte eintragen/ablesen", "Abstand zweier Punkte", "Mittelpunkt"] },
                            { name: "Funktionsbegriff", items: ["Zuordnung", "Definitionsbereich", "Funktionswerte berechnen", "Graphen zeichnen (Wertetabelle)"] },
                            {
                                name: "Lineare Funktionen", items: [], subtopics: [
                                    { name: "Konzepte", items: ["Steigung m", "y-Achsenabschnitt b", "Nullstelle", "Geradengleichung aus 2 Punkten", "Schnittpunkte"] }
                                ]
                            },
                            {
                                name: "Quadratische Funktionen", items: [], subtopics: [
                                    { name: "Konzepte", items: ["Normalparabel", "Scheitelpunktform", "Öffnung (a>0 / a<0)", "Verschiebung & Streckung"] }
                                ]
                            },
                            { name: "Weitere Funktionstypen", items: ["Potenzfunktionen (x³, x⁴)", "Wurzelfunktion √x", "Betragsfunktion |x|", "Hyperbel 1/x"] }
                        ]
                    },
                    {
                        name: "Geometrie",
                        topics: [
                            {
                                name: "Ebene Figuren", items: [], subtopics: [
                                    { name: "Formen & Formeln", items: ["Dreieck (A=g·h/2, Winkelsumme 180°)", "Rechteck & Quadrat", "Parallelogramm & Trapez", "Kreis (U=2πr, A=πr²)"] }
                                ]
                            },
                            {
                                name: "Körper", items: [], subtopics: [
                                    { name: "Volumen & Oberfläche", items: ["Quader & Würfel", "Prisma", "Zylinder (V=πr²h)"] }
                                ]
                            },
                            { name: "Satz des Pythagoras", items: ["a²+b²=c²", "Hypotenuse berechnen", "Kathete berechnen", "Rechtwinkligkeit prüfen"] },
                            {
                                name: "Trigonometrie (rechtwinkliges △)", items: [], subtopics: [
                                    { name: "Grundlagen", items: ["sin(α) = Gegenkathete/Hypotenuse", "cos(α) = Ankathete/Hypotenuse", "tan(α) = Gegenkathete/Ankathete"] },
                                    { name: "Spezielle Winkel", items: ["30° (sin=1/2)", "45° (sin=√2/2)", "60° (sin=√3/2)"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Statistik & Wahrscheinlichkeit",
                        topics: [
                            { name: "Datendarstellung", items: ["Wertetabellen", "Säulen-/Balkendiagramme", "Kreisdiagramme", "Histogramme"] },
                            { name: "Statistische Kennzahlen", items: ["Arithmetisches Mittel", "Median", "Modus"] },
                            {
                                name: "Wahrscheinlichkeit (Grundlagen)", items: [], subtopics: [
                                    { name: "Konzepte", items: ["Zufallsexperiment", "Ergebnis & Ereignis", "Laplace-Wahrscheinlichkeit", "Baumdiagramme"] }
                                ]
                            }
                        ]
                    }
                ]
            }
        ];

        // ═══════════════════════════════════════════════════════════
        // GYMI DATA – Mathematik & Physik
        // ═══════════════════════════════════════════════════════════
        const gymiData = [
            {
                subject: "gy-math",
                label: "Gymi – Mathematik",
                modules: [
                    {
                        name: "Algebra",
                        topics: [
                            {
                                name: "Gleichungen & Ungleichungen", items: [], subtopics: [
                                    { name: "Quadratische Gleichungen", items: ["pq-Formel / Mitternachtsformel", "Diskriminante & Lösungsanzahl", "Faktorisieren"] },
                                    { name: "Höhere Ordnung", items: ["Polynomdivision", "Substitution (biquadratisch)", "Satz vom Nullprodukt"] },
                                    { name: "Ungleichungen", items: ["Äquivalenzumformung", "Fallunterscheidung", "Systeme mit 2 Variablen (graphisch)"] },
                                    { name: "Parameterdiskussion", items: ["Diskriminante D=b²−4ac", "Lösungsanzahl abhängig von Parametern"] }
                                ]
                            },
                            {
                                name: "Komplexe Zahlen", items: [], subtopics: [
                                    { name: "Darstellungsformen", items: ["Algebraische Form (a+bi)", "Trigonometrische Form r(cosφ+i·sinφ)", "Gaußsche Zahlenebene"] },
                                    { name: "Rechenoperationen", items: ["Addition & Subtraktion", "Multiplikation & Division", "Konjugiert Komplexes", "Betrag & Argument"] },
                                    { name: "Fortgeschritten", items: ["Satz von Moivre (Potenzen)", "n-te Wurzeln in ℂ", "Gleichungen in ℂ lösen", "Geometrische Interpretation (Drehung/Streckung)"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Analysis",
                        topics: [
                            {
                                name: "Elementare Funktionen", items: [], subtopics: [
                                    { name: "Grundtypen", items: ["Konstante & Identität", "Lineare & Affine", "Potenz- & Wurzelfunktionen", "Betragsfunktion"] },
                                    { name: "Transzendente Funktionen", items: ["Exponentialfunktion (eˣ, aˣ)", "Logarithmus (ln, log_a)", "Trigonometrische (sin, cos, tan)"] },
                                    { name: "Abwandlungen", items: ["Spiegelungen f(−x), −f(x)", "Verschiebungen f(x+k), f(x)+k", "Streckung k·f(x)", "|f(x)| und f(|x|)"] }
                                ]
                            },
                            {
                                name: "Folgen & Reihen", items: [], subtopics: [
                                    { name: "Folgentypen", items: ["Arithmetische Folge (aₙ=a₁+(n−1)d)", "Geometrische Folge (aₙ=a₁·qⁿ⁻¹)"] },
                                    { name: "Methoden", items: ["Vollständige Induktion", "Summenformeln"] },
                                    { name: "Konvergenz", items: ["Grenzwert bestimmen", "Konvergenzbegriff"] }
                                ]
                            },
                            {
                                name: "Grenzwerte & Stetigkeit", items: [], subtopics: [
                                    { name: "Limes", items: ["Grenzwertsätze", "Asymptoten (waagrecht/senkrecht/schräg)", "Regel von L'Hôpital"] },
                                    { name: "Stetigkeit", items: ["Punktweise Stetigkeit", "Sprungstellen & Lücken"] }
                                ]
                            },
                            {
                                name: "Differentialrechnung", items: [], subtopics: [
                                    { name: "Grundlagen", items: ["Differenzenquotient → Differentialquotient", "Tangentensteigung"] },
                                    { name: "Ableitungsregeln", items: ["Summenregel", "Produktregel", "Quotientenregel", "Kettenregel"] },
                                    { name: "Ableitungen wichtiger Funktionen", items: ["Potenz-/Exponential-/Log-Funktionen", "Trigonometrische Funktionen"] },
                                    { name: "Kurvendiskussion", items: ["Nullstellen", "Extrema (1. Ableitung)", "Wendepunkte (2. Ableitung)", "Krümmungsverhalten"] },
                                    { name: "Anwendungen", items: ["Optimierungsprobleme", "Tangentengleichung"] }
                                ]
                            },
                            {
                                name: "Integralrechnung", items: [], subtopics: [
                                    { name: "Grundlagen", items: ["Stammfunktion", "Bestimmtes Integral (Riemann)", "Hauptsatz der Analysis"] },
                                    { name: "Methoden", items: ["Substitution", "Partielle Integration"] },
                                    { name: "Anwendungen", items: ["Flächenberechnung zwischen Graphen", "Rotationsvolumen"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Trigonometrie",
                        topics: [
                            { name: "Einheitskreis", items: ["sin/cos als Koordinaten", "Periodizität", "Spezielle Winkel (30°, 45°, 60°, 90°)"] },
                            {
                                name: "Beziehungen", items: [], subtopics: [
                                    { name: "Winkelbeziehungen", items: ["Komplementärwinkel (α+β=90°)", "Supplementärwinkel (α+β=180°)", "Gegenwinkel"] },
                                    { name: "Additionstheoreme", items: ["sin(α±β) = sinα·cosβ ± cosα·sinβ", "cos(α±β) = cosα·cosβ ∓ sinα·sinβ"] }
                                ]
                            },
                            { name: "Sinus- & Kosinussatz", items: ["a/sinα = b/sinβ = c/sinγ", "c² = a²+b² − 2ab·cosγ"] },
                            { name: "Goniometrische Gleichungen", items: ["sin(x)=0 → x=kπ", "cos(x)=0 → x=π/2+kπ", "Allgemeine Lösungsmengen"] }
                        ]
                    },
                    {
                        name: "Vektorielle & Analytische Geometrie",
                        topics: [
                            {
                                name: "Vektoroperationen", items: [], subtopics: [
                                    { name: "Grundlagen", items: ["Addition & Skalarmultiplikation", "Linearkombination", "Kolinear & Komplanar", "Orthonormierte Basen"] },
                                    { name: "Produkte", items: ["Skalarprodukt (u·v = |u||v|cosφ)", "Kreuzprodukt (u×v, senkrechter Vektor)", "Spatprodukt (Volumen)"] }
                                ]
                            },
                            {
                                name: "Analytische Geometrie Ebene", items: [], subtopics: [
                                    { name: "Geraden", items: ["Parametergleichung g(t)=P+t·r", "Normalenform ax+by+c=0"] },
                                    { name: "Kreise", items: ["(x−x₀)²+(y−y₀)²=r²", "Tangentengleichung"] },
                                    { name: "Kegelschnitte", items: ["Ellipse", "Parabel", "Hyperbel", "Brennpunkte & Exzentrizität"] },
                                    { name: "Lagebeziehungen", items: ["Schnittpunkte", "Abstände (Punkt-Gerade)", "Winkelhalbierende"] }
                                ]
                            },
                            {
                                name: "Analytische Geometrie Raum", items: [], subtopics: [
                                    { name: "Geraden & Ebenen", items: ["Parametergleichung", "Kartesische Ebenengleichung", "Normalenvektor"] },
                                    { name: "Abstände", items: ["Punkt-Punkt", "Punkt-Gerade", "Punkt-Ebene", "Windschiefe Geraden"] },
                                    { name: "Winkel", items: ["Gerade-Gerade", "Gerade-Ebene", "Ebene-Ebene"] },
                                    { name: "Körper", items: ["Würfel & Quader", "Prisma & Zylinder", "Kegel & Kugel"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Stochastik",
                        topics: [
                            {
                                name: "Beschreibende Statistik", items: [], subtopics: [
                                    { name: "Darstellung", items: ["Kreisdiagramm", "Stabdiagramm", "Histogramm"] },
                                    { name: "Kennzahlen", items: ["Arithmetisches Mittel", "Median & Modus", "Varianz & Standardabweichung"] }
                                ]
                            },
                            {
                                name: "Kombinatorik", items: [], subtopics: [
                                    { name: "Zählprinzipien", items: ["Permutationen (mit/ohne Wdh.)", "Variationen (mit/ohne Wdh.)", "Kombinationen (mit/ohne Wdh.)"] },
                                    { name: "Sätze", items: ["Binomischer Lehrsatz", "Pascalsches Dreieck"] }
                                ]
                            },
                            {
                                name: "Wahrscheinlichkeitsrechnung", items: [], subtopics: [
                                    { name: "Grundlagen", items: ["Ereignisse (A∩B, A∪B, Ā)", "Unabhängige & disjunkte Ereignisse"] },
                                    { name: "Regeln", items: ["Additionsregel", "Multiplikationsregel", "Bedingte Wahrscheinlichkeit P(A|B)"] },
                                    { name: "Darstellung", items: ["Ergebnisbaum"] }
                                ]
                            },
                            {
                                name: "Zufallsvariablen", items: [], subtopics: [
                                    { name: "Kenngrößen", items: ["Erwartungswert", "Standardabweichung"] },
                                    { name: "Verteilungen", items: ["Binomialverteilung P(X=k)", "Normalverteilung (Näherung)"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Lineare Algebra",
                        topics: [
                            {
                                name: "Lineare Abbildungen", items: [], subtopics: [
                                    { name: "Begriffe", items: ["Definition (Addition & Skalierung erhalten)", "Kern (Nullraum)", "Bildraum"] },
                                    { name: "Matrixdarstellung", items: ["Abbildungsmatrix relativ zu Basis", "Basiswechsel"] }
                                ]
                            },
                            {
                                name: "2×2-Matrizen", items: [], subtopics: [
                                    { name: "Operationen", items: ["Matrixaddition", "Skalarmultiplikation", "Matrixmultiplikation"] },
                                    { name: "Determinante & Inverse", items: ["det(A) = ad−bc", "A⁻¹ = (1/det)·[[d,−b],[−c,a]]", "Invertierbarkeit (det≠0)"] }
                                ]
                            },
                            {
                                name: "Eigenwertprobleme", items: [], subtopics: [
                                    { name: "Berechnung", items: ["det(A−λI)=0", "Eigenwerte", "Eigenvektoren"] },
                                    { name: "Interpretation", items: ["Invariante Richtungen", "Streckung/Stauchung", "Symmetrien & Rotationen"] }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                subject: "gy-phys",
                label: "Gymi – Physik",
                modules: [
                    {
                        name: "Grundlagen",
                        topics: [
                            {
                                name: "Grössen & Einheiten", items: [], subtopics: [
                                    { name: "SI-System", items: ["Grundgrössen", "Masseinheiten"] },
                                    { name: "Dimensionen", items: ["Einheitenanalyse"] }
                                ]
                            },
                            {
                                name: "Numerik & Darstellung", items: [], subtopics: [
                                    { name: "Genauigkeit", items: ["Signifikante Stellen", "Exakte Rechnung", "Abschätzung"] },
                                    { name: "Schreibweisen", items: ["Exponentialschreibweise", "Zehnerpotenzen", "Vorsilben (Milli, Mega etc.)"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Mechanik",
                        topics: [
                            {
                                name: "Kinematik (Bewegungslehre)", items: [], subtopics: [
                                    { name: "Bewegungsgrössen", items: ["Ort & Weg", "Geschwindigkeit (Vektor/Skalar)", "Beschleunigung", "Bewegungsdiagramme (t-x, t-v)"] },
                                    { name: "Geradlinige Bewegung", items: ["Gleichförmige Bewegung", "Gleichmässig beschleunigte Bewegung", "Freier Fall"] },
                                    { name: "Kreisbewegung", items: ["Frequenz & Periode", "Winkelgeschwindigkeit", "Bahngeschwindigkeit", "Zentripetalbeschleunigung"] }
                                ]
                            },
                            {
                                name: "Dynamik (Kräfte)", items: [], subtopics: [
                                    { name: "Masse & Materie", items: ["Trägheit", "Schwere", "Dichte"] },
                                    { name: "Kraftbegriff", items: ["Vektordarstellung", "Newtons Axiome (1., 2., 3.)", "Kräfteparallelogramm"] },
                                    { name: "Kraftarten", items: ["Gewichtskraft", "Federkraft (Hookesches Gesetz)", "Reibungskraft (Haft/Gleit)", "Normalkraft"] }
                                ]
                            },
                            {
                                name: "Arbeit & Energie", items: [], subtopics: [
                                    { name: "Arbeit", items: ["Definition", "Hubarbeit", "Beschleunigungsarbeit", "Reibungsarbeit"] },
                                    { name: "Energieformen", items: ["Kinetische Energie", "Potentielle Energie (Lage)", "Spannenergie (Feder)"] },
                                    { name: "Erhaltungssätze", items: ["Energieerhaltungssatz", "Impuls & Impulserhaltung"] },
                                    { name: "Leistung", items: ["Definition", "Wirkungsgrad"] }
                                ]
                            },
                            {
                                name: "Hydrostatik", items: [], subtopics: [
                                    { name: "Druck", items: ["Definition", "Schweredruck", "Pascalsches Prinzip"] },
                                    { name: "Auftrieb", items: ["Archimedisches Prinzip", "Schwimmen & Sinken"] }
                                ]
                            },
                            {
                                name: "Gravitation", items: [], subtopics: [
                                    { name: "Gravitationsgesetz", items: ["Newtonsche Anziehung", "Satellitenbahnen"] },
                                    { name: "Keplersche Gesetze", items: ["Ellipsenbahnen", "Flächensatz", "Umlaufzeiten (3. Gesetz)"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Thermische Phänomene",
                        topics: [
                            {
                                name: "Temperatur & Wärme", items: [], subtopics: [
                                    { name: "Temperaturskalen", items: ["Celsius", "Kelvin", "Absoluter Nullpunkt"] },
                                    { name: "Grundbegriffe", items: ["Temperatur vs. Wärme", "Thermisches Gleichgewicht"] }
                                ]
                            },
                            {
                                name: "Thermodynamik", items: [], subtopics: [
                                    { name: "Hauptsätze", items: ["Erster Hauptsatz (Energieerhaltung)", "Zweiter Hauptsatz (Entropie/Richtung)"] },
                                    { name: "Wärmeübertragung", items: ["Wärmeleitung", "Konvektion (Strömung)", "Wärmestrahlung"] }
                                ]
                            },
                            {
                                name: "Materie & Zustände", items: [], subtopics: [
                                    { name: "Ausdehnung", items: ["Festkörper", "Flüssigkeiten", "Gase"] },
                                    { name: "Aggregatszustände", items: ["Schmelzen & Erstarren", "Verdampfen & Kondensieren", "Spezifische Wärmekapazität", "Latente Wärme"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Elektrizitätslehre",
                        topics: [
                            {
                                name: "Elektrostatik", items: [], subtopics: [
                                    { name: "Ladung", items: ["Coulomb-Gesetz", "Ladungstrennung"] },
                                    { name: "Elektrisches Feld", items: ["Feldstärke", "Feldlinien", "Homogenes Feld"] },
                                    { name: "Potential", items: ["Spannung", "Arbeit im E-Feld", "Energie"] }
                                ]
                            },
                            {
                                name: "Gleichstromkreise", items: [], subtopics: [
                                    { name: "Grundgrössen", items: ["Stromstärke", "Elektrischer Widerstand", "Spezifischer Widerstand"] },
                                    { name: "Gesetzmässigkeiten", items: ["Ohmsches Gesetz", "Reihenschaltung", "Parallelschaltung"] },
                                    { name: "Energieumsatz", items: ["Elektrische Leistung", "Joule'sche Wärme"] }
                                ]
                            },
                            {
                                name: "Magnetismus", items: [], subtopics: [
                                    { name: "Magnetfeld", items: ["Feldlinienbilder", "Stromdurchflossener Leiter", "Elektromagnete"] },
                                    { name: "Kraftwirkung", items: ["Lorentzkraft (auf Leiter)", "Induktion (qualitativ)"] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "Optik & Wellen",
                        topics: [
                            {
                                name: "Wellenlehre", items: [], subtopics: [
                                    { name: "Kenngrössen", items: ["Wellenlänge", "Amplitude", "Frequenz", "Ausbreitungsgeschwindigkeit"] },
                                    { name: "Wellentypen", items: ["Transversalwellen", "Longitudinalwellen"] }
                                ]
                            },
                            {
                                name: "Wellenphänomene", items: [], subtopics: [
                                    { name: "Ausbreitung", items: ["Reflexionsgesetz", "Brechungsgesetz (Snellius)"] },
                                    { name: "Superposition", items: ["Interferenz", "Konstruktiv & Destruktiv"] }
                                ]
                            },
                            { name: "Optik (Grundlagen)", items: ["Lichtgeschwindigkeit", "Lichtstrahlmodell", "Spektrum"] }
                        ]
                    },
                    {
                        name: "Atomphysik",
                        topics: [
                            {
                                name: "Atomaufbau", items: ["Kern-Hülle-Modell", "Kernkräfte"], subtopics: [
                                    { name: "Elementarteilchen", items: ["Protonen", "Neutronen", "Elektronen"] }
                                ]
                            },
                            {
                                name: "Radioaktivität", items: [], subtopics: [
                                    { name: "Strahlungsarten", items: ["Alpha-Zerfall", "Beta-Zerfall", "Gamma-Strahlung"] },
                                    { name: "Gesetzmässigkeiten", items: ["Halbwertszeit", "Zerfallsreihe", "Periodensystem (Ordnungszahl/Massenzahl)"] },
                                    { name: "Strahlenschutz", items: ["Abschirmung"] }
                                ]
                            }
                        ]
                    }
                ]
            }
        ];

        // ═══════════════════════════════
        // STATE
        // ═══════════════════════════════
        let currentSem = 'all';
        let currentLevel = 1;
        let zoomedModule = null;
        let showArrows = true;

        // ═══════════════════════════════
        // RENDER
        // ═══════════════════════════════
        function renderSubtopics(subtopics) {
            if (!subtopics || subtopics.length === 0) return '';
            return subtopics.map(st => {
                // Recursively handle deeper subtopics
                let deeperHtml = '';
                if (st.subtopics && st.subtopics.length > 0) {
                    deeperHtml = `<div class="level4-group" style="margin-top:6px;">
        ${st.subtopics.map(dst => `
          <div class="level4-group">
            <div class="level4-label">${dst.name}</div>
            <div class="level4-tags">${dst.items.map(i => `<span class="level4-tag">${i}</span>`).join('')}</div>
          </div>
        `).join('')}
      </div>`;
                }
                return `<div class="level4-group">
      <div class="level4-label">${st.name}</div>
      <div class="level4-tags">${st.items.map(i => `<span class="level4-tag">${i}</span>`).join('')}</div>
      ${deeperHtml}
    </div>`;
            }).join('');
        }

        function renderTopic(topic) {
            const hasItems = (topic.items && topic.items.length > 0) || (topic.subtopics && topic.subtopics.length > 0);
            const levelOpenClass = currentLevel >= 3 ? ' level-open' : '';
            return `
    <div class="level2-item${levelOpenClass}" onclick="toggleLevel2(event, this)">
      <div class="level2-header">
        <span>${topic.name}</span>
        ${hasItems ? '<span class="level2-toggle">▼</span>' : ''}
      </div>
      ${hasItems ? `
        <div class="level3-container">
          <div class="level3-list">
            ${(topic.items || []).map(item => `<span class="level3-tag">${item}</span>`).join('')}
            ${renderSubtopics(topic.subtopics)}
          </div>
        </div>
      ` : ''}
    </div>
  `;
        }

        function renderModule(mod, semNum) {
            const levelOpenClass = currentLevel >= 2 ? ' level-open' : '';
            const modId = String(semNum) + '--' + mod.name.toLowerCase()
                .replace(/[äöüÄÖÜ]/g, c => ({ 'ä': 'ae', 'ö': 'oe', 'ü': 'ue', 'Ä': 'ae', 'Ö': 'oe', 'Ü': 'ue' }[c] || c))
                .replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
            return `
    <div class="module-card${levelOpenClass}" data-mod-id="${modId}" onclick="toggleModule(event, this)">
      <div class="module-header">
        <span class="module-name">${mod.name}</span>
        <span class="module-toggle">▼</span>
      </div>
      <div class="level2-container">
        ${mod.topics.map(t => renderTopic(t)).join('')}
      </div>
    </div>
  `;
        }

        function render() {
            const container = document.getElementById('content');
            const isVorGymi = currentSem === 'all' || currentSem === 'vor-gymi';
            const isGymi = currentSem === 'all' || currentSem === 'gymi';
            const isStudium = currentSem === 'all' || ['1', '2', '3', '4'].includes(currentSem);

            // Vor-Gymi sections
            const vorGymiHtml = vorGymiData.map(vg => {
                return `
      <div class="semester-section${!isVorGymi ? ' hidden' : ''}" data-sem="${vg.subject}">
        <h2 class="semester-header">${vg.label}</h2>
        <div class="module-grid">
          ${vg.modules.map(m => renderModule(m, vg.subject)).join('')}
        </div>
      </div>`;
            }).join('');

            // Divider Vor-Gymi → Gymi
            const divider1Html = `
      <div class="section-divider${!isGymi && !isVorGymi ? ' hidden' : ''}${currentSem === 'vor-gymi' ? ' hidden' : ''}${!isGymi ? ' hidden' : ''}">
        <span>Gymnasium</span>
      </div>`;

            // Gymi sections
            const gymiHtml = gymiData.map(gy => {
                return `
      <div class="semester-section${!isGymi ? ' hidden' : ''}" data-sem="${gy.subject}">
        <h2 class="semester-header">${gy.label}</h2>
        <div class="module-grid">
          ${gy.modules.map(m => renderModule(m, gy.subject)).join('')}
        </div>
      </div>`;
            }).join('');

            // Divider Gymi → Studium
            const divider2Html = `
      <div id="studium-start" class="section-divider${!isStudium ? ' hidden' : ''}">
        <span>Studium – BSc ITET</span>
      </div>`;

            // Studium sections
            const studiumHtml = data.map(sem => {
                const hidden = !isStudium || (currentSem !== 'all' && String(sem.semester) !== currentSem);
                return `
      <div class="semester-section${hidden ? ' hidden' : ''}" data-sem="${sem.semester}">
        <h2 class="semester-header">${sem.label}</h2>
        <div class="module-grid">
          ${sem.modules.map(m => renderModule(m, sem.semester)).join('')}
        </div>
      </div>
    `;
            }).join('');

            container.innerHTML = vorGymiHtml + divider1Html + gymiHtml + divider2Html + studiumHtml;
            requestAnimationFrame(drawArrows);
        }

        // ═══════════════════════════════
        // ROADMAP – DEPENDENCY ARROWS
        // ═══════════════════════════════
        const dependencies = [
            // Vor-Gymi → Gymi
            ['vg-math--terme-potenzen-algebra', 'gy-math--algebra'],
            ['vg-math--funktionen-koordinatensystem', 'gy-math--analysis'],
            ['vg-math--geometrie', 'gy-math--trigonometrie'],
            ['vg-math--geometrie', 'gy-math--vektorielle-analytische-geometrie'],
            ['vg-math--statistik-wahrscheinlichkeit', 'gy-math--stochastik'],
            // Gymi Mathematik → Studium
            ['gy-math--analysis', '1--analysis-i'],
            ['gy-math--algebra', '1--analysis-i'],
            ['gy-math--trigonometrie', '1--analysis-i'],
            ['gy-math--lineare-algebra', '1--lineare-algebra'],
            ['gy-math--vektorielle-analytische-geometrie', '1--lineare-algebra'],
            ['gy-math--stochastik', '4--wahrscheinlichkeitstheorie-und-statistik'],
            ['gy-math--algebra', '3--diskrete-mathematik'],
            // Gymi Physik → Studium
            ['gy-phys--mechanik', '1--technische-mechanik'],
            ['gy-phys--elektrizitaetslehre', '1--netzwerk-und-schaltungen-i'],
            ['gy-phys--optik-wellen', '2--physik-i'],
            ['gy-phys--thermische-phaenomene', '2--physik-i'],
            ['gy-phys--atomphysik', '3--physik-ii'],
            ['gy-phys--elektrizitaetslehre', '4--elektromagnetische-wellen-und-felder'],
            // Studium – Semester-übergreifend
            ['1--analysis-i', '2--analysis-ii'],
            ['2--analysis-ii', '3--analysis-iii'],
            ['1--analysis-i', '2--mathematische-methoden'],
            ['1--netzwerk-und-schaltungen-i', '2--netzwerk-und-schaltungen-ii'],
            ['2--informatik-i', '3--informatik-ii'],
            ['3--informatik-ii', '4--technische-informatik'],
            ['1--digitaltechnik', '4--technische-informatik'],
            ['2--physik-i', '3--physik-ii'],
            ['3--signal-und-systemtheorie-i', '4--signal-und-systemtheorie-ii'],
            ['2--mathematische-methoden', '3--signal-und-systemtheorie-i'],
            ['2--netzwerk-und-schaltungen-ii', '3--signal-und-systemtheorie-i'],
            ['2--netzwerk-und-schaltungen-ii', '3--halbleiterschaltungstechnik'],
            ['3--physik-ii', '4--halbleiterelemente'],
            ['3--halbleiterschaltungstechnik', '4--halbleiterelemente'],
            ['2--analysis-ii', '4--elektromagnetische-wellen-und-felder'],
            ['1--lineare-algebra', '4--numerik'],
            ['1--analysis-i', '4--numerik'],
        ];

        function drawArrows() {
            const container = document.getElementById('content');
            if (!container) return;

            let svg = document.getElementById('arrow-svg');
            if (!svg) {
                svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.id = 'arrow-svg';
                container.appendChild(svg);
            }

            if (!showArrows) { svg.innerHTML = ''; return; }

            const w = container.scrollWidth;
            const h = container.scrollHeight;
            svg.setAttribute('width', w);
            svg.setAttribute('height', h);
            svg.setAttribute('viewBox', '0 0 ' + w + ' ' + h);

            const cR = container.getBoundingClientRect();
            let paths = '';

            dependencies.forEach(([fromId, toId]) => {
                const fromEl = container.querySelector('[data-mod-id="' + fromId + '"]');
                const toEl = container.querySelector('[data-mod-id="' + toId + '"]');
                if (!fromEl || !toEl) return;
                if (fromEl.closest('.semester-section.hidden') || toEl.closest('.semester-section.hidden')) return;
                if (fromEl.offsetParent === null || toEl.offsetParent === null) return;

                const fR = fromEl.getBoundingClientRect();
                const tR = toEl.getBoundingClientRect();
                const x1 = fR.left + fR.width / 2 - cR.left;
                const y1 = fR.bottom - cR.top;
                const x2 = tR.left + tR.width / 2 - cR.left;
                const y2 = tR.top - cR.top;

                let stroke, marker;
                if (fromId.startsWith('vg-')) { stroke = 'rgba(249,168,212,0.35)'; marker = 'url(#arr-vg)'; }
                else if (fromId.startsWith('gy-')) { stroke = 'rgba(134,239,172,0.3)'; marker = 'url(#arr-gy)'; }
                else { stroke = 'rgba(108,138,255,0.25)'; marker = 'url(#arr-st)'; }

                const cpY = Math.max(Math.abs(y2 - y1) * 0.3, 30);
                const d = 'M' + x1 + ',' + y1 + ' C' + x1 + ',' + (y1 + cpY) + ' ' + x2 + ',' + (y2 - cpY) + ' ' + x2 + ',' + y2;
                paths += '<path d="' + d + '" fill="none" stroke="' + stroke + '" stroke-width="1.5" marker-end="' + marker + '"/>';
            });

            svg.innerHTML = '<defs>'
                + '<marker id="arr-vg" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="rgba(249,168,212,0.55)"/></marker>'
                + '<marker id="arr-gy" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="rgba(134,239,172,0.5)"/></marker>'
                + '<marker id="arr-st" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="rgba(108,138,255,0.45)"/></marker>'
                + '</defs>' + paths;
        }

        function scheduleArrowRedraw() {
            requestAnimationFrame(drawArrows);
            setTimeout(drawArrows, 200);
            setTimeout(drawArrows, 400);
        }

        // ═══════════════════════════════
        // INTERACTIONS
        // ═══════════════════════════════
        function toggleModule(e, el) {
            if (e.target.closest('.level2-item')) return; // don't toggle when clicking inner
            el.classList.toggle('expanded');
            scheduleArrowRedraw();
        }

        function toggleLevel2(e, el) {
            e.stopPropagation();
            el.classList.toggle('open');
            scheduleArrowRedraw();
        }

        function zoomOut() {
            zoomedModule = null;
            document.getElementById('zoomIndicator').classList.remove('visible');
            render();
        }

        // Semester tabs
        document.querySelectorAll('.sem-tab').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.sem-tab').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentSem = btn.dataset.sem;
                render();
            });
        });

        // Abstraction level buttons
        document.querySelectorAll('.level-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.level-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentLevel = parseInt(btn.dataset.level);
                render();
            });
        });

        // Arrow toggle
        document.getElementById('arrowToggle').addEventListener('click', function () {
            showArrows = !showArrows;
            this.classList.toggle('active', showArrows);
            drawArrows();
        });

        // Redraw arrows on resize
        window.addEventListener('resize', () => requestAnimationFrame(drawArrows));

        // Initial render
        render();

        // Auto-scroll to Studium on initial load
        setTimeout(() => {
            const el = document.getElementById('studium-start');
            if (el) el.scrollIntoView({ behavior: 'instant' });
        }, 50);
    </script>
</body>

</html>